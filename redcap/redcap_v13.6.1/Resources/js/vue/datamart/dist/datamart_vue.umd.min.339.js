(("undefined"!==typeof self?self:this)["webpackChunkdatamart_vue"]=("undefined"!==typeof self?self:this)["webpackChunkdatamart_vue"]||[]).push([[339],{6339:function(t,e,i){"use strict";i.d(e,{Z:function(){return C}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-card",{attrs:{"header-tag":"header","header-bg-variant":"info","header-text-variant":"white","no-body":""},scopedSlots:t._u([{key:"header",fn:function(){return[i("div",{staticClass:"d-flex align-items-center"},[i("h4",{staticClass:"mb-0  me-5 font-weight-bold text-nowrap"},[t._v("Source Fields List")]),i("b-form-group",{staticClass:"mb-0 ml-auto",attrs:{"label-for":"filter-input","label-cols-sm":"0","label-align-sm":"left","label-size":"sm"}},[i("b-input-group",{attrs:{size:"sm"}},[i("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search",debounce:"300"},model:{value:t.textProxy,callback:function(e){t.textProxy=e},expression:"textProxy"}}),i("b-input-group-append",[i("b-button",{attrs:{disabled:!t.textProxy},on:{click:t.resetQuery}},[t._v("Clear")])],1)],1)],1)],1)]},proxy:!0}])},[i("div",{staticClass:"p-2",attrs:{id:"selected-list"}},[i("FieldCategory",{attrs:{container:t.container}})],1)])],1)},l=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.totalVisible>0?i("div",{staticClass:"field-category m-0 p-0"},[""!==t.container.id?i("header",{staticClass:"d-flex"},[i("section",{staticClass:"d-inline me-2",on:{click:t.toggle}},[t.collapsed?i("font-awesome-icon",{attrs:{icon:["fas","chevron-circle-right"],"fixed-width":""}}):i("font-awesome-icon",{attrs:{icon:["fas","chevron-circle-down"],"fixed-width":""}})],1),i("section",{staticClass:"font-weight-bold",on:{click:t.toggle}},[i("span",[t._v(t._s(t.container.id))]),i("span",{staticClass:"d-block small font-italic text-muted"},[t.query?[t._v("showing "+t._s(t.totalVisible)+" of "+t._s(t.totalOverallFields)+" | ")]:t._e(),[t._v(t._s(t.totalOverallSelected)+"/"+t._s(t.totalVisible)+" field"+t._s(1===t.totalVisible?"":"s")+" selected")],t.totalOverallDisabled>0?[t._v(" ("+t._s(t.totalOverallDisabled)+" field"+t._s(1===t.totalOverallDisabled?"":"s")+" disabled)")]:t._e()],2)]),i("div",{staticClass:"ml-auto text-nowrap"},[i("b-button",{attrs:{size:"sm",variant:t.allSelected?"success":"light"},on:{click:function(e){return t.toggleAll(!t.allSelected)}}},[t.allSelected?i("span",[t._v("deselect all")]):i("span",[t._v("select all")])])],1)]):t._e(),t.collapsed&&""!==t.container.id?t._e():i("div",{staticClass:"children",class:{"ms-5":""!==t.container.id}},[t._l(t.container.children,(function(e,s){return[!t.isFhirField(e)||t.isFhirField(e)&&!e.hidden?i("section",{key:s},[t.isFhirField(e)?[i("FieldNode",{staticClass:"py-1",attrs:{data:e}})]:[i("FieldCategory",{staticClass:"py-1",attrs:{container:e}})]],2):t._e()]}))],2)]):t._e()},n=[],r=(i(7327),i(1539),i(1249),i(6364)),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ms-0 p-0 d-flex align-items-center fhir"},[i("b-form-checkbox",{attrs:{id:"checkbox-"+t.data.field,disabled:t.disabled,switch:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),i("label",{staticClass:"m-0",class:{"disabled-option":t.data.disabled},attrs:{for:"checkbox-"+t.data.field}},[i("span",[t._v(t._s(t.data.field))]),i("span",{staticClass:"ms-2 font-italic"},[t._v("("+t._s(t.data.label)+")")])]),t.data.disabled?i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ms-2 text-danger",attrs:{title:""+t.data.disabled_reason}},[i("font-awesome-icon",{attrs:{icon:["fas","exclamation-circle"],"fixed-width":""}})],1):t._e()],1)},d=[],c={data:function(){return{}},props:{data:{type:[r.O],default:null}},created:function(){},computed:{mandatoryFields:function(){return this.$store.state.settings.mandatoryFields},disabled:function(){var t=this.data.field;return this.mandatoryFields.indexOf(t)>=0},selected:{get:function(){return this.mandatoryFields.indexOf(this.data.field)>=0||this.data.selected},set:function(t){var e=this.data.field;this.$store.dispatch("revision/updateFields",{name:e,checked:t})}}},methods:{onClick:function(t){var e={field:t.field+="miao"};this.$store.dispatch("metadata/update",{item:t,params:e})}}},u=c,f=(i(1226),i(3736)),h=(0,f.Z)(u,o,d,!1,null,"7d6476c7",null),v=h.exports,p=i(6486),m={name:"FieldCategory",data:function(){return{collapsed:!0,count:0}},components:{FieldNode:v},props:{container:{type:r.Q,default:null}},computed:{query:function(){return this.$store.state.metadata.query},fields:function(){return this.container.getFields()},overallFields:function(){return this.container.getFields(!0)},visibleFields:function(){return this.fields.filter((function(t){var e=t.hidden;return!e}))},overallVisibleFields:function(){return this.overallFields.filter((function(t){var e=t.hidden;return!e}))},overallDisabledFields:function(){return this.overallFields.filter((function(t){var e=t.disabled;return e}))},selected:function(){var t=this.$store.state.revision.fields,e=this.visibleFields.map((function(t){var e=t.field;return e}));return(0,p.intersection)(e,t)},overallSelected:function(){var t=this.$store.state.revision.fields,e=this.overallVisibleFields.map((function(t){var e=t.field;return e}));return(0,p.intersection)(e,t)},totalFields:function(){return this.fields.length},totalOverallFields:function(){return this.overallFields.length},totalSelected:function(){return this.selected.length},totalOverallSelected:function(){return this.overallSelected.length},totalVisible:function(){return this.overallVisibleFields.length},totalOverallDisabled:function(){return this.overallDisabledFields.length},allSelected:{get:function(){var t=this.totalVisible==this.totalOverallSelected;return t},set:function(t){var e=this.$store.state.revision.fields,i=this.overallVisibleFields.map((function(t){var e=t.field;return e}));e=t?(0,p.union)(i,e):(0,p.difference)(e,i),this.$store.dispatch("revision/setFields",e)}},indeterminate:{get:function(){return 0!=this.totalSelected&&!this.allSelected},set:function(){}}},methods:{isFhirField:function(t){return t instanceof r.O},toggle:function(){this.collapsed=!this.collapsed},toggleAll:function(t){var e=this.$store.state.revision.fields,i=this.overallVisibleFields.map((function(t){var e=t.field;return e}));e=t?(0,p.union)(i,e):(0,p.difference)(e,i),this.$store.dispatch("revision/setFields",e)}},watch:{query:{immediate:!1,handler:function(t){""===t&&(this.collapsed=!0)}}}},b=m,g=(i(3821),(0,f.Z)(b,a,n,!1,null,"1cdab569",null)),x=g.exports,_={components:{FieldCategory:x},data:function(){return{text:""}},created:function(){this.resetQuery()},computed:{hiddenFields:function(){return this.$store.state.metadata.hiddenList},container:function(){var t=this.$store.getters["metadata/filteredGroups"](this.$store);return t},textProxy:{get:function(){return this.text},set:function(t){this.text=t,this.applyFilter()}}},methods:{resetQuery:function(){this.textProxy=""},applyFilter:function(){this.$store.dispatch("metadata/setQuery",this.text)}}},F=_,y=(i(9762),(0,f.Z)(F,s,l,!1,null,"32909525",null)),C=y.exports},1247:function(t,e,i){"use strict";i.r(e);var s=i(3481),l=i.n(s),a=i(2400),n=i.n(a),r=n()(l());r.push([t.id,"header>*[data-v-1cdab569]{cursor:pointer}",""]),e["default"]=r},72:function(t,e,i){"use strict";i.r(e);var s=i(3481),l=i.n(s),a=i(2400),n=i.n(a),r=n()(l());r.push([t.id,".fhir>*[data-v-7d6476c7]{cursor:pointer}.fhir label.disabled-option[data-v-7d6476c7]{text-decoration:line-through}",""]),e["default"]=r},3432:function(t,e,i){"use strict";i.r(e);var s=i(3481),l=i.n(s),a=i(2400),n=i.n(a),r=n()(l());r.push([t.id,"#selected-list[data-v-32909525]{min-height:300px;max-height:500px;overflow-y:scroll}",""]),e["default"]=r},3821:function(t,e,i){var s=i(1247);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var l=i(4402).Z;l("11534c9e",s,!0,{sourceMap:!1,shadowMode:!1})},1226:function(t,e,i){var s=i(72);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var l=i(4402).Z;l("0f7c0ccd",s,!0,{sourceMap:!1,shadowMode:!1})},9762:function(t,e,i){var s=i(3432);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var l=i(4402).Z;l("0b48ef46",s,!0,{sourceMap:!1,shadowMode:!1})}}]);