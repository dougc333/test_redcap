(("undefined"!==typeof self?self:this)["webpackChunkmapping_helper_vue"]=("undefined"!==typeof self?self:this)["webpackChunkmapping_helper_vue"]||[]).push([[757],{6033:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("span",{staticClass:"node"},[e.isArray(e.payload)?t("span",{staticClass:"parenthesis open",domProps:{textContent:e._s("[")}}):e._e(),e.isObject(e.payload)?t("span",{staticClass:"parenthesis open",domProps:{textContent:e._s("{")}}):e._e(),t("span",{staticClass:"expander text-muted",on:{click:function(t){return t.stopPropagation(),e.onClick.apply(null,arguments)}}},[e.open?t("font-awesome-icon",{attrs:{icon:["fas","chevron-circle-down"]}}):t("font-awesome-icon",{attrs:{icon:["fas","chevron-circle-right"]}})],1),e.open?e._l(e.payload,(function(s,n){return t("span",{key:n,staticClass:"child d-block ms-2"},[e.isArray(e.payload)?e._e():t("span",{staticClass:"me-2 font-weight-bold"},[e._v('"'+e._s(n)+'":')]),e.isLeaf(s)?t("span",{class:e.getClass(s),domProps:{textContent:e._s(e.print(s))}}):t("Node",{attrs:{payload:s}}),e.isLast(n)?e._e():t("span",[e._v(",")])],1)})):e._e(),e.isArray(e.payload)?t("span",{staticClass:"parenthesis closed",domProps:{textContent:e._s("]")}}):e._e(),e.isObject(e.payload)?t("span",{staticClass:"parenthesis closed",domProps:{textContent:e._s("}")}}):e._e()],2)},a=[],i=s(5953),o=s(5125),r=(s(7941),s(7042),{name:"Node",data:function(){return{open:!0}},components:{Node:Node},props:{payload:{type:[Object,Array],default:function(){return{}}}},methods:{isLeaf:function(e){return!(this.isObject(e)||this.isArray(e))},isObject:function(e){return"object"===(0,o.Z)(e)&&!Array.isArray(e)},isArray:function(e){return Array.isArray(e)},isLast:function(e){if(this.isObject(this.payload)){var t=Object.keys(this.payload);return t.slice(-1)[0]===e}return!!this.isArray(this.payload)&&e===(0,i.Z)(this.payload).length-1},print:function(e){return"string"===typeof e?'"'.concat(e,'"'):e},getClass:function(e){var t=(0,o.Z)(e);return t},onClick:function(){this.open=!this.open}}}),c=r,l=(s(6863),s(3736)),d=(0,l.Z)(c,n,a,!1,null,"6adeaa6d",null),u=d.exports},7757:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var n=s(1787),a=(s(3210),function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-wrapper"},[t("b-table",e._b({attrs:{fields:e.fields},scopedSlots:e._u([{key:"head(select)",fn:function(s){return[t("div",{staticClass:"d-flex"},[t("b-form-checkbox",{attrs:{indeterminate:e.indeterminate},on:{change:e.toggleAll},model:{value:e.allSelected,callback:function(t){e.allSelected=t},expression:"allSelected"}},[t("span",[e._v(e._s(s.label))])])],1),t("b-button",{staticClass:"w-100 text-nowrap",attrs:{size:"sm",variant:"outline-secondary",disabled:!(e.allSelected||e.indeterminate)},on:{click:e.showExportPreview}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","file-download"],"fixed-width":""}}),t("span",[e._v("export")])],1)]}},{key:"cell(select)",fn:function(s){return[e.isLoincCode(s.item)?t("div",{staticClass:"select-wrapper"},[e.isMapped(s.item["coding_code"])?e._e():t("b-form-checkbox",{attrs:{disabled:!s.item["coding_code"],value:s.item["coding_code"],switch:"",size:"lg"},model:{value:e.selected_codes,callback:function(t){e.selected_codes=t},expression:"selected_codes"}})],1):e._e()]}},{key:"cell(coding_display)",fn:function(s){return[t("span",{domProps:{innerHTML:e._s(e.$attrs.markText(s.value))}}),s.item["coding_text"]!=s.value?[t("span",{staticClass:"font-italic small d-block"},[e._v("("+e._s(s.item["coding_text"])+")")])]:e._e()]}},{key:"cell(coding_code)",fn:function(s){return[t("span",{domProps:{innerHTML:e._s(e.$attrs.markText(s.value))}}),e.isLoincCode(s.item)?t("div",{staticClass:"small"},[e.isMapped(s.value)?t("b-badge",{attrs:{variant:"info"}},[e._v("mapped")]):t("b-badge",{attrs:{variant:"warning"}},[e._v("not mapped")])],1):e._e()]}},{key:"cell()",fn:function(s){return[e.isObject(s.value)?t("div",[t("Node",{attrs:{payload:s.value}})],1):t("div",[t("span",{domProps:{innerHTML:e._s(e.$attrs.markText(s.value))}})])]}}])},"b-table",(0,n.Z)((0,n.Z)({},e.$attrs),e.$props),!1)),t("b-alert",{attrs:{show:!0}},[e._v(" Please note that results with multiple coding systems are split in separated rows. ")]),t("b-modal",{ref:"export-modal",attrs:{title:"Export codes"},scopedSlots:e._u([{key:"modal-footer",fn:function(s){var n=s.cancel;return[t("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(e){return n()}}},[e._v(" Cancel ")]),t("b-button",{attrs:{size:"sm",variant:"success",disabled:!e.exportFileName},on:{click:function(t){return e.onExportClicked()}}},[t("font-awesome-icon",{attrs:{icon:["fas","file-export"],"fixed-width":""}}),t("span",{staticClass:"ms-2"},[e._v("Export")])],1)]}}])},[t("div",[t("p",{staticClass:"mb-2"},[e._v("Do you want to export the current selection?")]),t("b-table",{staticClass:"mb-2",attrs:{small:"",items:e.exportItems,striped:"",bordered:"","sticky-header":"100"},scopedSlots:e._u([{key:"cell(code)",fn:function(s){return[t("b",{staticClass:"text-nowrap"},[e._v(e._s(s.value))])]}}])}),t("b-input",{attrs:{placeholder:"enter a name for this selection..."},model:{value:e.exportFileName,callback:function(t){e.exportFileName="string"===typeof t?t.trim():t},expression:"exportFileName"}})],1)])],1)}),i=[],o=s(3903),r=s(5953),c=s(7176),l=s(5125),d=(s(1539),s(4747),s(7941),s(9601),s(4916),s(4723),s(7042),s(2222),s(1249),s(9720),s(7658),s(6033)),u=(s(6992),s(8783),s(3948),s(285),s(1637),s(381),s(4516),function(e,t){var s=window.URL.createObjectURL(new Blob([e])),n=document.createElement("a");n.href=s,n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}),p=s(4991),f=function e(t){var s={};return Object.keys(t).forEach((function(n){"object"===(0,l.Z)(t[n])&&null!==t[n]?Object.assign(s,e(t[n])):s[n]=t[n]})),s},m={extends:p["default"],components:{Node:d.Z},data:function(){return{exportFileName:"codes.txt",allSelected:!1,indeterminate:!1,selected_codes:[],custom_fields:[{key:"select",sortable:!1},{key:"coding_display",sortable:!0},{key:"coding_code",sortable:!0},{key:"value",sortable:!0},{key:"valueUnit",sortable:!0},{key:"timestamp",sortable:!0},{key:"coding_system",sortable:!0}]}},methods:{isObject:function(e){return"object"==(0,l.Z)(e)},isNonArrayObject:function(e){return!Array.isArray(e)&&this.isObject(e)},shouldDisplayCell:function(e){return!(Array.isArray(e)&&e.length<1)},isLoincCode:function(e){var t=e.coding_system;if(t)return t.match(/loinc/i)},isMapped:function(e){return this.cdpMappingNames.indexOf(e)>0},toggleAll:function(e){this.selected_codes=e?Object.keys(this.selectable).slice():[]},showExportPreview:function(){var e=this.$refs["export-modal"];e&&e.show()},onExportClicked:function(){var e,t="",s=(0,c.Z)(this.exportItems);try{for(s.s();!(e=s.n()).done;){var n=e.value,a=n.code,i=n.label;t+="".concat(a,", ").concat(i,"\n")}}catch(r){s.e(r)}finally{s.f()}u(t,this.exportFileName);var o=this.$refs["export-modal"];o&&o.hide()}},computed:{itemsProxy:function(){var e=(0,r.Z)(this.items),t=e.map((function(e){for(var t=e.code,s=void 0===t?{}:t,n=0,a=Object.entries(f(s));n<a.length;n++){var i=(0,o.Z)(a[n],2),r=i[0],c=i[1];e["coding_".concat(r)]=c}return e}));return t},allChecked:{get:function(){return this.selected_codes.length==Object.keys(this.selectable).length},set:function(e){console.log("allChecked",e)}},intermediateChecked:{get:function(){return 0!=this.selected_codes.length&&this.selected_codes.length!=Object.keys(this.selectable).length},set:function(e){console.log("intermediate",e)}},selectable:function(){var e=this,t={};return this.itemsProxy.forEach((function(s){if(e.isLoincCode(s)){var n=s.coding_code,a=s.coding_display;if(n&&!(Object.keys(t).indexOf(n)>=0)){var i=e.cdpMappingNames;i.indexOf(n)>=0||(t[n]=a)}}})),t},exportItems:function(){for(var e=[],t=(0,r.Z)(this.selected_codes),s=0,n=Object.entries(this.selectable);s<n.length;s++){var a=(0,o.Z)(n[s],2),i=a[0],c=a[1],l={code:i,label:c};t.indexOf(i)>=0&&e.indexOf(l)<0&&e.push(l)}return e},fields:function(){return this.custom_fields},cdpMappingNames:function(){var e=this.$store.getters["project/mappingSourceNames"];return e}},watch:{items:{immediate:!0,handler:function(){this.selected_codes=[]}},selected_codes:function(e){0===e.length?(this.indeterminate=!1,this.allSelected=!1):e.length===Object.keys(this.selectable).length?(this.indeterminate=!1,this.allSelected=!0):(this.indeterminate=!0,this.allSelected=!1)}}},h=m,b=(s(2936),s(3736)),v=(0,b.Z)(h,a,i,!1,null,"13ffc694",null),y=v.exports},4991:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(1787),a=function(){var e=this,t=e._self._c;return t("div",[t("b-table",e._b({staticClass:"my-2",attrs:{fields:e.fields},scopedSlots:e._u([{key:"cell()",fn:function(s){return[t("span",{domProps:{innerHTML:e._s(e.$attrs.markText(s.value))}})]}}])},"b-table",(0,n.Z)((0,n.Z)({},e.$attrs),e.$props),!1))],1)},i=[],o=s(5953),r=(s(1539),s(4747),s(7941),s(7658),{data:function(){return{}},computed:{fields:function(){var e=this.setFields(this.items);return e}},methods:{setFields:function(e){var t=[],s=(0,o.Z)(e).reduce((function(e,s){return Object.keys(s).forEach((function(s){if(t.indexOf(s)<0){var n={key:s,sortable:!0};e.push(n),t.push(s)}})),e}),[]);return s}},props:{stacked:{type:Boolean,defaults:!1},items:{type:Array,default:function(){return[]}}}}),c=r,l=(s(1609),s(3736)),d=(0,l.Z)(c,a,i,!1,null,"cabf33a4",null),u=d.exports},1919:function(e,t,s){"use strict";s.r(t);var n=s(3481),a=s.n(n),i=s(2400),o=s.n(i),r=o()(a());r.push([e.id,".expander[data-v-6adeaa6d]{cursor:pointer}",""]),t["default"]=r},6623:function(e,t,s){"use strict";s.r(t);var n=s(3481),a=s.n(n),i=s(2400),o=s.n(i),r=o()(a());r.push([e.id,".table-wrapper[data-v-13ffc694] .select-wrapper{text-align:center;margin:50% auto}.table-wrapper[data-v-13ffc694] .b-table-stacked .select-wrapper{text-align:left;margin:auto}",""]),t["default"]=r},8394:function(e,t,s){"use strict";s.r(t);var n=s(3481),a=s.n(n),i=s(2400),o=s.n(i),r=o()(a());r.push([e.id,".icon[data-v-cabf33a4]{-webkit-transition-delay:0s;transition-delay:0s;-webkit-transition-duration:.1s;transition-duration:.1s;-webkit-transition-timing-function:ease-in-out;transition-timing-function:ease-in-out;-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transform:rotate(0);transform:rotate(0)}.stacked .icon[data-v-cabf33a4]{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}",""]),t["default"]=r},6863:function(e,t,s){var n=s(1919);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=s(4402).Z;a("e8e40ae4",n,!0,{sourceMap:!1,shadowMode:!1})},2936:function(e,t,s){var n=s(6623);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=s(4402).Z;a("23cfc5bd",n,!0,{sourceMap:!1,shadowMode:!1})},1609:function(e,t,s){var n=s(8394);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=s(4402).Z;a("04ab7f8a",n,!0,{sourceMap:!1,shadowMode:!1})}}]);