(("undefined"!==typeof self?self:this)["webpackChunkmapping_helper_vue"]=("undefined"!==typeof self?self:this)["webpackChunkmapping_helper_vue"]||[]).push([[868],{5026:function(t,e,n){"use strict";var a=n(5125),r=(n(4819),n(1539),n(1299),new Proxy((function(){return{}}),{get:function(t,e,n){return"name"===e?"Undefined":r},apply:function(){return r}})),s=function t(e){return new Proxy(e,{get:function(e,n){var s=Reflect.get(e,n);return"object"===(0,a.Z)(s)?t(s):void 0==s?r:s}})};e["Z"]=s},6033:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("span",{staticClass:"node"},[t.isArray(t.payload)?e("span",{staticClass:"parenthesis open",domProps:{textContent:t._s("[")}}):t._e(),t.isObject(t.payload)?e("span",{staticClass:"parenthesis open",domProps:{textContent:t._s("{")}}):t._e(),e("span",{staticClass:"expander text-muted",on:{click:function(e){return e.stopPropagation(),t.onClick.apply(null,arguments)}}},[t.open?e("font-awesome-icon",{attrs:{icon:["fas","chevron-circle-down"]}}):e("font-awesome-icon",{attrs:{icon:["fas","chevron-circle-right"]}})],1),t.open?t._l(t.payload,(function(n,a){return e("span",{key:a,staticClass:"child d-block ms-2"},[t.isArray(t.payload)?t._e():e("span",{staticClass:"me-2 font-weight-bold"},[t._v('"'+t._s(a)+'":')]),t.isLeaf(n)?e("span",{class:t.getClass(n),domProps:{textContent:t._s(t.print(n))}}):e("Node",{attrs:{payload:n}}),t.isLast(a)?t._e():e("span",[t._v(",")])],1)})):t._e(),t.isArray(t.payload)?e("span",{staticClass:"parenthesis closed",domProps:{textContent:t._s("]")}}):t._e(),t.isObject(t.payload)?e("span",{staticClass:"parenthesis closed",domProps:{textContent:t._s("}")}}):t._e()],2)},r=[],s=n(5953),o=n(5125),i=(n(7941),n(7042),{name:"Node",data:function(){return{open:!0}},components:{Node:Node},props:{payload:{type:[Object,Array],default:function(){return{}}}},methods:{isLeaf:function(t){return!(this.isObject(t)||this.isArray(t))},isObject:function(t){return"object"===(0,o.Z)(t)&&!Array.isArray(t)},isArray:function(t){return Array.isArray(t)},isLast:function(t){if(this.isObject(this.payload)){var e=Object.keys(this.payload);return e.slice(-1)[0]===t}return!!this.isArray(this.payload)&&t===(0,s.Z)(this.payload).length-1},print:function(t){return"string"===typeof t?'"'.concat(t,'"'):t},getClass:function(t){var e=(0,o.Z)(t);return e},onClick:function(){this.open=!this.open}}}),c=i,l=(n(6863),n(3736)),u=(0,l.Z)(c,a,r,!1,null,"6adeaa6d",null),d=u.exports},3384:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});n(3210);var a=function(){var t=this,e=t._self._c;return e("div",[e("b-alert",{attrs:{show:null!==t.payload,variant:"light"}},[e("h6",[t._v("Raw response")]),e("div",[e("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(e){t.show=!t.show}}},[t.show?e("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","chevron-down"],"fixed-width":""}}):e("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","chevron-right"],"fixed-width":""}}),e("span",{staticClass:"ms-2"},[t._v("Show")])],1),e("b-button",{staticClass:"ms-2",attrs:{size:"sm",variant:"primary"},on:{click:t.onDownloadClicked}},[e("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","download"],"fixed-width":""}}),e("span",{staticClass:"ms-2"},[t._v("Download")])],1)],1),e("Node",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"raw-response",attrs:{payload:t.payload}})],1),e("b-modal",{ref:"save-modal",attrs:{title:"Download response"},scopedSlots:t._u([{key:"modal-footer",fn:function(n){var a=n.cancel;return[e("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(t){return a()}}},[t._v(" Cancel ")]),e("b-button",{attrs:{size:"sm",variant:"success",disabled:!t.filename},on:{click:t.onSaveOkClicked}},[e("font-awesome-icon",{attrs:{icon:["fas","save"],"fixed-width":""}}),e("span",{staticClass:"ms-2"},[t._v("Save")])],1)]}}])},[e("div",[e("b-input",{attrs:{placeholder:"enter a name...",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSaveOkClicked.apply(null,arguments)}},model:{value:t.filename,callback:function(e){t.filename="string"===typeof e?e.trim():e},expression:"filename"}})],1)])],1)},r=[],s=(n(8862),n(6033)),o={components:{Node:s.Z},data:function(){return{filename:"",show:!1}},props:{payload:{type:[Object,Array],default:function(){return{}}}},methods:{onDownloadClicked:function(){var t=this.$refs["save-modal"];t&&(this.filename="",t.show())},onSaveOkClicked:function(){if(""!=this.filename){this.download(JSON.stringify(this.payload,null,2),this.filename);var t=this.$refs["save-modal"];t&&t.hide()}},download:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"export.txt",n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},i=o,c=(n(913),n(3736)),l=(0,c.Z)(i,a,r,!1,null,"e3945ed0",null),u=l.exports},3670:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});n(2526),n(1817);var a=function(){var t=this,e=t._self._c;return e("div",[e("span",[t._v(t._s(t.description))])])},r=[],s={props:{description:{type:String,default:""}}},o=s,i=n(3736),c=(0,i.Z)(o,a,r,!1,null,null,null),l=c.exports},868:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Z}});n(3210);var a=function(){var t=this,e=t._self._c;return e("div",[e("b-card",[e("div",[e("div",[e("b-form-group",{attrs:{label:"MRN","label-for":"mrn-input","label-cols":"2"}},[e("b-form-input",{attrs:{name:"mrn",id:"mrn-input",placeholder:"Enter a medical record number"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.mrn,callback:function(e){t.mrn="string"===typeof e?e.trim():e},expression:"mrn"}})],1)],1),e("div",{staticClass:"mt-2"},[e("router-view",{ref:"fhir-resource",attrs:{name:"form"},on:{validation_changed:t.onValidationChanged}})],1)]),e("router-view",{staticClass:"mt-2",attrs:{name:"dateRange",from:t.options.dateStart,to:t.options.dateEnd},on:{"update:from":function(e){return t.$set(t.options,"dateStart",e)},"update:to":function(e){return t.$set(t.options,"dateEnd",e)}}}),e("div",{staticClass:"mt-2"},[e("b-button",{attrs:{variant:"outline-primary",size:"sm",disabled:t.isButtonDisabled},on:{click:t.fetch}},[t.loading?e("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:"","fixed-width":""}}):e("font-awesome-icon",{attrs:{icon:["fas","cloud-download-alt"],"fixed-width":""}}),e("span",{staticClass:"ms-2"},[t._v("Fetch")])],1)],1),e("ResourceInfo",{staticClass:"mt-2",attrs:{description:t.page_description}})],1),e("ResourceTableWrapper",{attrs:{items:t.fhir_resources},scopedSlots:t._u([{key:"default",fn:function(n){return[e("router-view",t._b({attrs:{name:"table"}},"router-view",n,!1))]}}])}),e("PayloadPanel",{attrs:{payload:t.payload}})],1)},r=[],s=n(6448),o=n(9115),i=n(1787),c=(n(2526),n(1817),n(1249),n(7658),n(2222),n(8309),n(5026)),l=n(3670),u=n(3384),d=(n(7327),n(1539),function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-2"},[e("div",{staticClass:"d-flex align-items-center"},[e("div",[e("b-button",{class:{stacked:t.stacked},attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(e){t.stacked=!t.stacked}}},[e("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","sync-alt"],"fixed-width":""}}),e("span",{staticClass:"ms-2"},[t._v("Rotate table")])],1)],1),e("b-form-group",{staticClass:"mb-0 ms-2"},[e("b-input-group",{attrs:{size:"sm"}},[e("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"search...",debounce:"300"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-input-group-append",[e("b-button",{attrs:{disabled:!t.filter,variant:t.filter?"warning":"secondary"},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1),e("span",{staticClass:"ms-2"},[t._v("Total: "),e("b",[t._v(t._s(t.totalItems))])]),e("div",{staticClass:"d-flex align-items-center ml-auto"},[t.hasItems?e("b-pagination",{staticClass:"my-auto ms-0",attrs:{"total-rows":t.totalItems,"per-page":t.perPage,size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e(),e("b-dropdown",{staticClass:"ms-2",attrs:{text:"Results per page",size:"sm",variant:"outline-primary"},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("span",[t._v("Per page: "),e("b",[t._v(t._s(t.perPage))])])]},proxy:!0}])},[t._l(t.resultsPerPageOptions,(function(n,a){return[e("b-dropdown-item",{key:"per-page-".concat(a,"-").concat(n),attrs:{active:n==t.perPage},on:{click:function(e){t.perPage=n}}},[t._v(t._s(n))])]}))],2)],1)],1),e("div",{staticClass:"resource-table my-2"},[t._t("default",null,{markText:t.markText},t.tableProps)],2)])}),f=[],p=n(5953),m=(n(4603),n(8450),n(4916),n(8386),n(9714),n(5306),n(2479),n(8862),n(4723),[25,50,100,500]),h={components:{},data:function(){return{filter:null,filterOn:[],stacked:!1,currentPage:1,perPage:m[0],resultsPerPageOptions:m}},methods:{markText:function(t){var e=this.filter;if(!e||"string"!==typeof t)return t;var n=new RegExp("(".concat(e,")"),"ig"),a=t.replace(n,'<mark class="highlight">$1</mark>');return a}},computed:{itemsProxy:function(){var t=this,e=(0,p.Z)(this.items),n=e.filter((function(e){if(!t.filter)return!0;var n=Object.values(e),a=JSON.stringify(n),r=new RegExp(t.filter,"ig");return a.match(r)}));return n},hasItems:function(){return this.itemsProxy.length>0},totalItems:function(){return this.itemsProxy.length},icon_rotation:function(){return this.stacked?90:0},tableProps:function(){return{stacked:this.stacked,items:this.itemsProxy,"filter-included-fields":this.filterOn,"show-empty":!0,currentPage:this.currentPage,perPage:this.perPage,small:!0,bordered:!0,striped:!0,hover:!0}}},props:{items:{type:Array,default:function(){return[]}},fields:{type:Array,default:function(){return[]}}}},v=h,y=(n(140),n(3736)),b=(0,y.Z)(v,d,f,!1,null,"0ffc8358",null),g=b.exports,w=n(381),_=n.n(w),k=function(t){if(""==t||null==t)return!0;var e="YYYY-MM-DD";return _()(t,e).format(e)===t},x={components:{ResourceInfo:l.Z,PayloadPanel:u.Z,ResourceTableWrapper:g},data:function(){var t=_()().subtract(1,"years").format("YYYY-MM-DD"),e=_()().format("YYYY-MM-DD");return{test:null,mrn:"",options:{dateStart:t,dateEnd:e},loading:!1,payload:null,fhir_component_validation:{},fhir_resources:[]}},computed:{isButtonDisabled:function(){var t=this.mrn.length||0,e=1==this.loading,n=this.$v.$invalid,a=this.fhir_component_validation.$invalid,r=void 0!==a&&a;return e||t<1||n||r},page_description:function(){var t=this.$route.meta.description,e=void 0===t?"":t;return e}},methods:{fetch:function(){var t=this,e=this.$refs["fhir-resource"];if(e&&"function"==typeof e.getParams){var n=e.getParams()||{},a=n.fhir_category,r=n.options,s=function(){return t.sendFhirRequest(a,(0,i.Z)({},r))};s&&this.wrapRequest(s)}},wrapRequest:function(t){var e=this;return(0,o.Z)((0,s.Z)().mark((function n(){var a,r,o,l,u,d,f;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.loading=!0,e.error=null,e.payload=null,e.fhir_resources=[],n.next=7,t();case 7:a=n.sent,r=a.data,o=r.map((function(t){return t.data})),e.fhir_resources=o,e.payload=(0,i.Z)({},a.metadata.payload),n.next=21;break;case 14:n.prev=14,n.t0=n["catch"](0),l="",u=(0,c.Z)(n.t0),d=u.response.data,d.is_error,f=d.message,d.code,l=f||n.t0,e.$bvModal.msgBoxOk(l,{bodyClass:"text-break",title:"Error"});case 21:return n.prev=21,e.loading=!1,n.finish(21);case 24:case"end":return n.stop()}}),n,null,[[0,14,21,24]])})))()},sendFhirRequest:function(t){var e=arguments,n=this;return(0,o.Z)((0,s.Z)().mark((function a(){var r,o,i,c;return(0,s.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},o=[],n.options.dateStart&&o.push("ge".concat(n.options.dateStart)),n.options.dateEnd&&o.push("le".concat(n.options.dateEnd)),o.length>0&&(r.date=[].concat(o)),a.next=7,n.$API.dispatch("fhir/fetchResource",t,n.mrn,r);case 7:return i=a.sent,c=i.data,a.abrupt("return",c);case 10:case"end":return a.stop()}}),a)})))()},onValidationChanged:function(t){this.fhir_component_validation=t},updateTitle:function(t,e){var n=(0,c.Z)(t).name,a=(0,c.Z)(e).name;n!==a&&(this.payload=null)}},validations:function(){return{dateStart:{isValidDate:k},dateEnd:{isValidDate:k}}},watch:{$route:{immediate:!0,handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updateTitle(t,e),this.fhir_resources=[],this.options={}}}}},C=x,P=(n(5922),(0,y.Z)(C,a,r,!1,null,"1cc6e48b",null)),Z=P.exports},1919:function(t,e,n){"use strict";n.r(e);var a=n(3481),r=n.n(a),s=n(2400),o=n.n(s),i=o()(r());i.push([t.id,".expander[data-v-6adeaa6d]{cursor:pointer}",""]),e["default"]=i},6284:function(t,e,n){"use strict";n.r(e);var a=n(3481),r=n.n(a),s=n(2400),o=n.n(s),i=o()(r());i.push([t.id,".raw-response[data-v-e3945ed0]{word-break:break-word}",""]),e["default"]=i},8040:function(t,e,n){"use strict";n.r(e);var a=n(3481),r=n.n(a),s=n(2400),o=n.n(s),i=o()(r());i.push([t.id,".resource-table[data-v-0ffc8358]{overflow-x:auto}.resource-table[data-v-0ffc8358] table thead th{vertical-align:middle}.icon[data-v-0ffc8358]{-webkit-transition-delay:0s;transition-delay:0s;-webkit-transition-duration:.1s;transition-duration:.1s;-webkit-transition-timing-function:ease-in-out;transition-timing-function:ease-in-out;-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transform:rotate(0);transform:rotate(0)}.stacked .icon[data-v-0ffc8358]{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.resource-table[data-v-0ffc8358] mark.highlight{padding:0;background-color:gold;font-weight:600}",""]),e["default"]=i},3687:function(t,e,n){"use strict";n.r(e);var a=n(3481),r=n.n(a),s=n(2400),o=n.n(s),i=o()(r());i.push([t.id,"*[data-v-1cc6e48b] .modal-body{word-break:break-word}",""]),e["default"]=i},6863:function(t,e,n){var a=n(1919);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var r=n(4402).Z;r("e8e40ae4",a,!0,{sourceMap:!1,shadowMode:!1})},913:function(t,e,n){var a=n(6284);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var r=n(4402).Z;r("c8419daa",a,!0,{sourceMap:!1,shadowMode:!1})},140:function(t,e,n){var a=n(8040);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var r=n(4402).Z;r("7b5fc5ee",a,!0,{sourceMap:!1,shadowMode:!1})},5922:function(t,e,n){var a=n(3687);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var r=n(4402).Z;r("7aef749c",a,!0,{sourceMap:!1,shadowMode:!1})}}]);